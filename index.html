<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Scratch Games + Clicker Challenge</title>
<style>
body {
  font-family: Arial, sans-serif;
  background: #111;
  color: white;
  padding: 20px;
  transition: background 0.3s, color 0.3s;
}

button {
  padding: 12px;
  margin: 8px 0;
  font-size: 18px;
  cursor: pointer;
  background: lime;
  border: none;
  border-radius: 8px;
  transition: background-color 0.3s, color 0.3s;
}

input {
  font-size: 16px;
  padding: 8px;
}

.games a {
  color: cyan;
  display: block;
  margin: 8px 0;
  text-decoration: none;
  transition: color 0.3s;
}

.games a:hover {
  text-decoration: underline;
}

.leaderboard {
  margin-top: 20px;
}

/* ===== –°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞ ===== */
.light-theme {
  background: white;
  color: black;
}

.light-theme .games a {
  color: darkblue;
}

.light-theme button {
  background: #8f8;
  color: black;
}

.light-theme input {
  background: #eee;
  color: black;
  border: 1px solid #ccc;
}
</style>
</head>
<body>

<h1>üî• Scratch Games + Clicker Challenge</h1>

<!-- –ö–Ω–æ–ø–∫–∞ —Å–º–µ–Ω—ã —Ç–µ–º—ã -->
<button id="themeToggle">‚òÄÔ∏è –°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞</button>

<!-- –ò–≥—Ä—ã -->
<div class="games">
  <h2>üéÆ My Projects</h2>
  <a href="https://scratch.mit.edu/projects/1266117577/" target="_blank">dodge from a ball</a>
  <a href="https://scratch.mit.edu/projects/1277330031/" target="_blank">ghoul want eeeeat</a>
</div>

<!-- Clicker -->
<h2>Clicks: <span id="clickCount">0</span></h2>
<button id="clickButton">Click Me!</button>
<br>
<input id="playerName" placeholder="Enter your name" maxlength="15">
<button id="saveScore">üíæ Save Score</button>

<!-- Leaderboard -->
<div class="leaderboard">
  <h2>üèÜ Global Top 5</h2>
  <ol id="leaderboardList"></ol>
</div>

<!-- Firebase SDK (compat) -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<script>
// ===== Firebase Configuration =====
const firebaseConfig = {
  apiKey: "AIzaSyATCCc_waIdUupeRVla1VGA8koZKLEC9GY",
  authDomain: "scratychgaaming.firebaseapp.com",
  projectId: "scratychgaaming",
  storageBucket: "scratychgaaming.firebasestorage.app",
  messagingSenderId: "125051495935",
  appId: "1:125051495935:web:52140518674ece65dd73ca",
  measurementId: "G-JQ9YZSBNS2"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

// ===== Click Counter =====
let count = 0;
const clickCountElem = document.getElementById("clickCount");
const clickButton = document.getElementById("clickButton");
const colors = ['orange','red','yellow','pink','lime','cyan','magenta','white'];

clickButton.addEventListener("click", () => {
  count++;
  clickCountElem.textContent = count;

  // –°–ª—É—á–∞–π–Ω—ã–π —Ü–≤–µ—Ç –∫–Ω–æ–ø–∫–∏
  const randomColor = colors[Math.floor(Math.random() * colors.length)];
  clickButton.style.backgroundColor = randomColor;

  setTimeout(() => clickButton.style.backgroundColor = 'lime', 400);
});

// ===== Save Score =====
const saveButton = document.getElementById("saveScore");
const playerNameInput = document.getElementById("playerName");
const leaderboardList = document.getElementById("leaderboardList");

saveButton.addEventListener("click", async () => {
  const name = playerNameInput.value.trim();
  if (!name) { alert("Enter your name!"); return; }

  await db.collection("leaderboard").add({
    name: name,
    score: count,
    timestamp: firebase.firestore.FieldValue.serverTimestamp()
  });

  alert("Saved!");
  loadLeaderboard();
  count = 0;
  clickCountElem.textContent = 0;
});

// ===== Load Leaderboard =====
async function loadLeaderboard() {
  leaderboardList.innerHTML = "Loading...";
  const querySnapshot = await db.collection("leaderboard")
    .orderBy("score","desc")
    .limit(5)
    .get();

  leaderboardList.innerHTML = "";
  if (querySnapshot.empty) {
    leaderboardList.innerHTML = "<li>No scores yet</li>";
    return;
  }

  querySnapshot.forEach(doc => {
    const data = doc.data();
    const li = document.createElement("li");
    li.textContent = `${data.name} ‚Äî ${data.score} clicks`;
    leaderboardList.appendChild(li);
  });
}

loadLeaderboard();

// ===== Theme Toggle =====
const themeToggle = document.getElementById("themeToggle");
themeToggle.addEventListener("click", () => {
  document.body.classList.toggle("light-theme");

  // –ú–µ–Ω—è–µ–º —Ç–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏
  if(document.body.classList.contains("light-theme")) {
    themeToggle.textContent = "üåô –¢—ë–º–Ω–∞—è —Ç–µ–º–∞";
  } else {
    themeToggle.textContent = "‚òÄÔ∏è –°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞";
  }
});
</script>

</body>
</html>
